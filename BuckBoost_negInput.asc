Version 4
SHEET 1 4164 4132
WIRE 784 -416 704 -416
WIRE 848 -416 784 -416
WIRE 704 -384 704 -416
WIRE 704 -288 704 -304
WIRE -1232 -32 -1392 -32
WIRE -1136 -32 -1232 -32
WIRE -1392 16 -1392 -32
WIRE -1232 32 -1232 -32
WIRE 560 96 272 96
WIRE 656 96 560 96
WIRE -1232 160 -1232 112
WIRE 560 160 560 96
WIRE 560 304 560 240
WIRE 560 368 560 304
WIRE -1232 416 -1232 240
WIRE 272 416 272 96
WIRE -1232 464 -1232 416
WIRE -1008 560 -1104 560
WIRE -848 560 -928 560
WIRE -640 560 -848 560
WIRE -576 560 -640 560
WIRE -320 560 -576 560
WIRE -160 560 -320 560
WIRE 784 560 688 560
WIRE 944 560 864 560
WIRE 1152 560 944 560
WIRE 1216 560 1152 560
WIRE 1584 560 1216 560
WIRE 1808 560 1584 560
WIRE -848 592 -848 560
WIRE 464 592 416 592
WIRE 944 592 944 560
WIRE 1808 608 1808 560
WIRE -576 624 -576 560
WIRE -160 624 -160 560
WIRE 1216 624 1216 560
WIRE -848 736 -848 656
WIRE 944 736 944 656
WIRE -160 752 -160 704
WIRE 1584 752 1584 560
WIRE 1808 752 1808 688
WIRE -576 768 -576 688
WIRE 1216 768 1216 688
WIRE -1232 800 -1232 752
WIRE 560 800 560 672
WIRE -848 848 -848 816
WIRE 944 848 944 816
WIRE -1232 864 -1232 800
WIRE 560 864 560 800
WIRE -320 976 -320 560
WIRE -176 976 -320 976
WIRE 1584 976 1584 832
WIRE 1648 976 1584 976
WIRE 1728 976 1648 976
WIRE -1392 1008 -1392 96
WIRE -1232 1008 -1232 944
WIRE -1232 1008 -1392 1008
WIRE -176 1008 -176 976
WIRE 272 1008 272 496
WIRE 560 1008 560 944
WIRE 560 1008 272 1008
WIRE 1728 1008 1728 976
WIRE -320 1040 -320 976
WIRE 1584 1040 1584 976
WIRE -176 1120 -176 1088
WIRE 1728 1120 1728 1088
WIRE -480 1152 -608 1152
WIRE -320 1152 -320 1120
WIRE -320 1152 -480 1152
WIRE 1232 1152 1184 1152
WIRE 1584 1152 1584 1120
WIRE 1584 1152 1232 1152
WIRE -1184 1168 -1184 752
WIRE -1136 1168 -1184 1168
WIRE -1088 1168 -1136 1168
WIRE 416 1168 416 592
WIRE 656 1168 416 1168
WIRE 704 1168 656 1168
WIRE -320 1200 -320 1152
WIRE -176 1200 -176 1184
WIRE -176 1200 -320 1200
WIRE 1584 1200 1584 1152
WIRE 1728 1200 1728 1184
WIRE 1728 1200 1584 1200
WIRE -320 1232 -320 1200
WIRE 1584 1232 1584 1200
WIRE -320 1360 -320 1312
WIRE 1584 1360 1584 1312
FLAG 1152 560 CM_out
FLAG 656 1168 CM_Vc
FLAG 944 848 0
FLAG 560 800 CM_p
FLAG 560 304 CM_a
FLAG 1216 768 0
FLAG 1584 1360 0
FLAG 1648 976 CM_in
FLAG 704 -288 0
FLAG 784 -416 Rload
FLAG 1808 752 0
FLAG 1232 1152 CM_Vi
FLAG -640 560 out
FLAG -1136 1168 Vc
FLAG -848 848 0
FLAG -1232 800 a
FLAG -1232 416 c
FLAG -576 768 0
FLAG -320 1360 0
FLAG -160 752 0
FLAG -480 1152 Vi
FLAG -1136 -32 0
FLAG 656 96 0
DATAFLAG 496 1168 ""
DATAFLAG 1712 560 ""
DATAFLAG 448 1008 ""
SYMBOL res 544 848 R0
WINDOW 0 -62 50 Left 2
WINDOW 3 -62 87 Left 2
SYMATTR InstName R5
SYMATTR Value 1µ
SYMBOL res 544 144 R0
WINDOW 0 58 36 Left 2
WINDOW 3 56 61 Left 2
SYMATTR InstName R_L2
SYMATTR Value 10m
SYMBOL voltage 272 400 R0
WINDOW 0 -122 57 Left 2
WINDOW 3 50 63 Left 2
SYMATTR InstName Vin_CM
SYMATTR Value {Vin}
SYMBOL cap 928 592 R0
SYMATTR InstName C2
SYMATTR Value {Cbulk}
SYMBOL res 928 720 R0
SYMATTR InstName R6
SYMATTR Value {Cesr}
SYMBOL res 768 576 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 1µ
SYMBOL cap 1200 624 R0
SYMATTR InstName C4
SYMATTR Value 1n
SYMBOL res 1568 1024 R0
SYMATTR InstName R4
SYMATTR Value {Rdiv1}
SYMBOL res 1568 1216 R0
SYMATTR InstName R9
SYMATTR Value {Rdiv2}
SYMBOL res 1712 992 R0
SYMATTR InstName R10
SYMATTR Value {Rspeed}
SYMBOL cap 1712 1120 R0
WINDOW 0 44 17 Left 2
WINDOW 3 42 50 Left 2
SYMATTR InstName C6
SYMATTR Value {Cspeed}
SYMBOL voltage 1584 848 R180
WINDOW 0 -71 93 Left 2
WINDOW 3 -66 32 Left 2
WINDOW 123 -114 59 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 0
SYMATTR Value2 AC 1u
SYMBOL voltage 704 -400 R0
WINDOW 3 65 58 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE({R_idle} {R_step} 0.5ms {loadRiseFall} {loadRiseFall} 1m 6m)
SYMATTR InstName V2
SYMBOL res 1792 592 R0
SYMATTR InstName R2
SYMATTR Value R = V(Rload)
SYMBOL TransconErrorAmp 1088 1088 M0
WINDOW 0 345 -56 Left 2
WINDOW 39 -461 239 Left 2
SYMATTR InstName X2
SYMATTR SpiceLine C_comp = {TA_Ccomp}, R_comp = {TA_Rcomp}, Pos = {TA_Max}, Neg = {TA_Min}, Gain = {TA_Gain}, Vref = {Vref}
SYMBOL res -1248 848 R0
WINDOW 0 -62 50 Left 2
WINDOW 3 -62 87 Left 2
SYMATTR InstName R1
SYMATTR Value 1µ
SYMBOL ind -1248 144 R0
WINDOW 0 56 38 Left 2
WINDOW 3 54 68 Left 2
SYMATTR InstName L1
SYMATTR Value {L}
SYMBOL res -1248 16 R0
WINDOW 0 58 36 Left 2
WINDOW 3 56 61 Left 2
SYMATTR InstName R_L1
SYMATTR Value 10m
SYMBOL voltage -1392 0 R0
WINDOW 0 -122 57 Left 2
WINDOW 3 50 63 Left 2
SYMATTR InstName Vin_CM1
SYMATTR Value {Vin}
SYMBOL cap -864 592 R0
SYMATTR InstName C1
SYMATTR Value {Cbulk}
SYMBOL res -864 720 R0
SYMATTR InstName R3
SYMATTR Value {Cesr}
SYMBOL res -1024 576 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 1µ
SYMBOL cap -592 624 R0
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL res -336 1024 R0
SYMATTR InstName R11
SYMATTR Value {Rdiv1}
SYMBOL res -336 1216 R0
SYMATTR InstName R12
SYMATTR Value {Rdiv2}
SYMBOL res -192 992 R0
SYMATTR InstName R13
SYMATTR Value {Rspeed}
SYMBOL cap -192 1120 R0
WINDOW 0 44 17 Left 2
WINDOW 3 42 50 Left 2
SYMATTR InstName C5
SYMATTR Value {Cspeed}
SYMBOL res -176 608 R0
SYMATTR InstName R14
SYMATTR Value R = V(Rload)
SYMBOL TransconErrorAmp -704 1088 M0
WINDOW 0 343 -58 Left 2
WINDOW 39 -233 243 Left 2
SYMATTR InstName X5
SYMATTR SpiceLine C_comp = {TA_Ccomp}, R_comp = {TA_Rcomp}, Pos = {TA_Max}, Neg = {TA_Min}, Gain = {TA_Gain}, Vref = {Vref}
SYMBOL IdealBoost -1200 656 R270
WINDOW 39 223 -8 VRight 2
WINDOW 0 236 11 VTop 2
SYMATTR SpiceLine Fs = {Fs}, Ri = {Rsense}, SlopeAmp = {SlopeAmp}, D_min = {D_lo}, D_max = {D_hi}
SYMATTR InstName X3
SYMBOL Boost_CM3 496 448 R0
WINDOW 0 102 -117 Bottom 2
WINDOW 39 625 -88 Bottom 2
SYMATTR InstName X4
SYMATTR SpiceLine Fs = {Fs}, Ri = {Rsense}, L = {L}, SlopeAmp = {SlopeAmp}, D_min = {D_lo}, D_max = {D_hi}
TEXT 1072 -192 Left 2 !.ac oct 100 10 10meg
TEXT 120 -440 Left 3 !.param L = 30u
TEXT -512 -592 Left 3 !.param Fs = 100k
TEXT -512 -552 Left 3 !.param D_lo = {80n * Fs}
TEXT -512 -512 Left 3 !.param D_hi = 0.9
TEXT -512 -432 Left 3 !.param SlopeAmp = 0.8m
TEXT -704 -552 Right 3 ;Duty Cycle Limits
TEXT -512 -664 Left 4 ;IC Parameters
TEXT 120 -584 Left 3 !.param Vout = 6
TEXT 120 -360 Left 3 !.param Cbulk = {100u}
TEXT 120 -328 Left 3 !.param Cesr = 1m
TEXT 120 -616 Left 3 !.param Vin = 5
TEXT 120 -408 Left 3 !.param Lesr = 10m
TEXT -512 -472 Left 3 !.param Rsense = 250m
TEXT 120 -200 Left 3 !.param Rdiv2 = 10k
TEXT 120 -160 Left 2 !.param Rdiv1 = Rdiv2 * (Vout - Vref) / Vref
TEXT -512 -216 Left 3 !.param Vref = 1.24
TEXT -512 -368 Left 3 ;TA Parameters
TEXT -512 -120 Left 3 !.param TA_Rcomp = 30k
TEXT -512 -160 Left 3 !.param TA_Ccomp = 2n
TEXT -512 -80 Left 3 !.param TA_Ccomp2 = 1p
TEXT -512 -328 Left 3 !.param TA_Gain = 135u
TEXT -512 -296 Left 3 !.param TA_Max = 2.4
TEXT -512 -264 Left 3 !.param TA_Min = 1m
TEXT 664 -584 Left 3 !.param I_step = 30mA
TEXT 664 -624 Left 3 !.param I_idle = 500m
TEXT 664 -528 Left 2 !.param R_idle = Vout / I_idle
TEXT 664 -216 Left 2 !.param loadRiseFall = 1u
TEXT 120 -280 Left 3 !.param Rspeed = 10meg
TEXT 120 -248 Left 3 !.param Cspeed = 1p
TEXT 664 -168 Left 2 !.param Vc = 390m
TEXT 120 -664 Left 4 ;Circuit Parameters
TEXT 664 -496 Left 2 !.param R_step = Vout / I_step
TEXT -656 504 Left 2 !.ic V(out) = {Vout}
TEXT -544 1104 Left 2 !.ic V(Vi) = {Vref}
TEXT 664 -664 Left 4 ;Load Parameters
TEXT -1272 1192 Left 2 !.ic V(Vc) = Vc
TEXT -1144 304 Left 2 !.ic I(L1) = {I_idle}
TEXT 1728 1480 Left 2 ;Drawn : Mark Dimattina
TEXT 1728 1432 Left 4 ;Title : BuckBoost_negInput
TEXT 1728 1544 Left 2 ;Rev: 0.01
TEXT 1728 1512 Left 2 ;Date: 02/09/2017
TEXT 1728 1576 Left 2 ;M.J.Dimattina@ieee.org
TEXT 1080 -144 Left 2 ;.tran 0 6m 0
TEXT -1136 344 Left 2 !.ic V(c) = -10m
TEXT 1064 -216 Left 2 !.step param Vout 4 6 2
RECTANGLE Normal 2320 1664 -1696 -800 2
