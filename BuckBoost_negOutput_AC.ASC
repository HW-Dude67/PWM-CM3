Version 4
SHEET 1 6372 4964
WIRE 2976 864 2912 864
WIRE 3040 864 2976 864
WIRE 2912 896 2912 864
WIRE 2912 992 2912 976
WIRE 1008 1536 784 1536
WIRE 1312 1536 1008 1536
WIRE 1472 1536 1312 1536
WIRE 2000 1536 1856 1536
WIRE 2224 1536 2000 1536
WIRE 2656 1536 2304 1536
WIRE 2752 1536 2656 1536
WIRE 2896 1536 2752 1536
WIRE 3248 1536 2896 1536
WIRE 3280 1536 3248 1536
WIRE 2752 1568 2752 1536
WIRE 1472 1584 1328 1584
WIRE 784 1616 784 1536
WIRE 1008 1664 1008 1536
WIRE 2752 1680 2752 1632
WIRE 1616 1696 1616 1664
WIRE 2896 1744 2896 1536
WIRE 3248 1776 3248 1536
WIRE 784 1792 784 1696
WIRE 1328 1792 1328 1584
WIRE 1552 1792 1328 1792
WIRE 2656 1808 2656 1536
WIRE 2896 1872 2896 1824
WIRE 1008 1888 1008 1728
WIRE 1616 1888 1616 1776
WIRE 1616 1888 1008 1888
WIRE 2000 2048 1936 2048
WIRE 2224 2048 2000 2048
WIRE 2416 2048 2304 2048
WIRE 2512 2048 2416 2048
WIRE 2656 2048 2656 1888
WIRE 2656 2048 2560 2048
WIRE 1328 2064 1328 1792
WIRE 1392 2064 1328 2064
WIRE 1456 2064 1392 2064
WIRE 2512 2080 2512 2048
WIRE 2656 2080 2656 2048
WIRE 2560 2096 2560 2048
WIRE 2512 2224 2512 2160
WIRE 1008 2320 1008 1888
WIRE 2560 2320 2560 2144
WIRE 2560 2320 1008 2320
WIRE 2656 2320 2656 2160
WIRE 2656 2320 2560 2320
WIRE 2896 2320 2896 1936
WIRE 2896 2320 2656 2320
WIRE 2960 2320 2896 2320
WIRE 3248 2320 3248 1856
WIRE 3248 2320 2960 2320
FLAG 2912 992 0
FLAG 2976 864 Rload
FLAG 1312 1536 CM3-a
FLAG 2960 2320 CM3-out
FLAG 784 1792 0
FLAG 1392 2064 CM3-Vc
FLAG 2000 2048 CM3-Vi
FLAG 2752 1680 0
FLAG 2000 1536 CM3-c
FLAG 2512 2224 0
FLAG 3280 1536 0
FLAG 2416 2048 CM3-Vo
DATAFLAG 1472 1792 ""
DATAFLAG 3120 2320 ""
SYMBOL voltage 2912 880 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -72 51 Left 2
WINDOW 3 44 51 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE({R_idle} {R_step} 2m 1u 1u 7m 16m)
SYMBOL res 2320 1520 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1m
SYMBOL cap 2880 1872 R0
SYMATTR InstName Cout1
SYMATTR Value 220µ
SYMBOL res 3232 1760 R0
SYMATTR InstName R3
SYMATTR Value R = V(Rload)
SYMBOL res 2640 1792 R0
SYMATTR InstName R4
SYMATTR Value {Rdiv1}
SYMBOL res 2640 2064 R0
SYMATTR InstName R5
SYMATTR Value {Rdiv2}
SYMBOL voltage 784 1600 R0
SYMATTR InstName V2
SYMATTR Value {Vin}
SYMBOL res 2880 1728 R0
SYMATTR InstName R8
SYMATTR Value {Cesr}
SYMBOL res 1600 1680 R0
SYMATTR InstName R9
SYMATTR Value 1µ
SYMBOL TransconErrorAmp 1840 1984 M0
WINDOW 0 380 -53 Right 2
WINDOW 39 794 231 Right 2
SYMATTR InstName X2
SYMATTR SpiceLine C_comp2 = {C_comp2}, C_comp = {C_comp}, R_comp = {R_comp}, Pos = 3, Neg = 0, Gain = {TA_Gain}, Vref = {Vref}
SYMBOL voltage 2208 2048 R270
WINDOW 0 115 -64 VRight 2
WINDOW 3 38 -70 VRight 2
WINDOW 123 75 -67 VRight 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value SINE(0)
SYMATTR Value2 AC {AC_amp} 0
SYMBOL cap 2736 1568 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL e 2512 2064 M0
SYMATTR InstName E3
SYMATTR Value 1
SYMBOL cap 992 1664 R0
SYMATTR InstName Cin1
SYMATTR Value 220µ
SYMBOL Buck_CM3 1552 1568 R0
WINDOW 0 -56 -122 Bottom 2
WINDOW 39 518 -86 Bottom 2
SYMATTR InstName X1
SYMATTR SpiceLine sync = 0, L = {L}, Fs = {Fs}, Ri = {Ri} , SlopeAmp = {Se / Fs}, D_min = {clampL}, D_max = {clampH}
TEXT 1208 1104 Left 2 !.param clampL = 0.1
TEXT 1208 1128 Left 2 !.param clampH = 0.99
TEXT 2896 1112 Left 2 !.ac oct 100 10 1meg
TEXT 1208 896 Left 2 !.param L = 37.5u
TEXT 1208 928 Left 2 !.param Fs = 50k
TEXT 1208 960 Left 2 !.param Ri = 0.33
TEXT 1208 1056 Left 2 !.param Se = {rAmp * Fs}
TEXT 1488 1056 Left 2 ;Compensation Ramp  - V/s
TEXT 1488 960 Left 2 ;R sense  - Ohms
TEXT 1488 928 Left 2 ;Switching Freq - Hz
TEXT 1488 896 Left 2 ;Inductance - H
TEXT 1488 1104 Left 2 ;Duty Cycle Limits
TEXT 1208 840 Left 4 ;PWM-CM Parameters
TEXT 1856 904 Left 2 !.param Vref = 2.5
TEXT 1856 936 Left 2 !.param TA_Gain = 135u
TEXT 1856 968 Left 2 !.param C_comp = 4n
TEXT 1856 1000 Left 2 !.param R_comp = 5k
TEXT 2328 952 Left 2 !.param I_idle = { abs( Vout / 3 ) }
TEXT 2328 976 Left 2 !.param I_step = { abs( Vout / 30 ) }
TEXT 2328 920 Left 2 !.param Vout = 5
TEXT 2328 1088 Left 2 !.param R_idle = { Vout / I_idle}
TEXT 2328 1112 Left 2 !.param R_step = { Vout / I_step }
TEXT 2328 896 Left 2 !.param Vin = 6
TEXT 2328 1016 Left 2 !.param Rdiv2 = 10k
TEXT 2328 1040 Left 2 !.param Rdiv1 = Rdiv2 * (Vout - Vref) / Vref
TEXT 1208 1016 Left 2 !.param rAmp = 0.5m
TEXT 1864 848 Left 4 ;Error Amp Parameters
TEXT 2320 848 Left 4 ;Circuit Parameters
TEXT 3760 3552 Left 2 ;Drawn : Mark Dimattina
TEXT 3760 3504 Left 4 ;Title : BuckBoost_negOutput
TEXT 3760 3616 Left 2 ;Rev: 0.01
TEXT 3760 3584 Left 2 ;Date: 02/09/2017
TEXT 3760 3648 Left 2 ;M.J.Dimattina@ieee.org
TEXT 2328 1264 Left 2 !.step param Vout 5 7 2
TEXT 2896 1072 Left 2 !.param  AC_amp = 0.01
TEXT 992 904 Left 2 ;.param L = 37.5u
TEXT 2896 1144 Left 2 ;.tran 0 12m 0
TEXT 2328 1160 Left 2 !.param Cesr = 1m
TEXT 1856 1040 Left 2 !.param C_comp2 = 1f
RECTANGLE Normal 4544 4960 -16 752 2
