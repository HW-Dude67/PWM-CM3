Version 4
SHEET 1 3748 852
WIRE -1648 -2496 -1824 -2496
WIRE -1568 -2496 -1648 -2496
WIRE -1408 -2496 -1488 -2496
WIRE -1264 -2496 -1360 -2496
WIRE -1216 -2496 -1264 -2496
WIRE -2096 -2480 -2128 -2480
WIRE -1968 -2480 -2016 -2480
WIRE -1936 -2480 -1968 -2480
WIRE -1264 -2464 -1264 -2496
WIRE -1408 -2448 -1408 -2496
WIRE -1360 -2432 -1360 -2496
WIRE -1936 -2416 -1936 -2480
WIRE -1824 -2416 -1824 -2496
WIRE -2096 -2256 -2128 -2256
WIRE -1968 -2256 -2016 -2256
WIRE -1936 -2256 -1936 -2336
WIRE -1936 -2256 -1968 -2256
WIRE -1824 -2256 -1824 -2336
WIRE -1408 -2256 -1408 -2368
WIRE -1408 -2256 -1824 -2256
WIRE -1360 -2256 -1360 -2384
WIRE -1264 -2256 -1264 -2384
WIRE -1264 -2256 -1360 -2256
WIRE -1216 -2256 -1264 -2256
WIRE -1824 -2208 -1824 -2256
WIRE -1968 -2032 -2096 -2032
WIRE -1968 -1968 -2272 -1968
WIRE -1552 -1968 -1632 -1968
WIRE -1488 -1968 -1552 -1968
WIRE -2272 -1920 -2272 -1968
WIRE -1968 -1904 -2064 -1904
WIRE -1552 -1904 -1632 -1904
WIRE -1488 -1904 -1552 -1904
WIRE -2064 -1856 -2064 -1904
WIRE -2272 -1792 -2272 -1840
WIRE -2064 -1728 -2064 -1776
FLAG -2128 -2480 A_in
IOPIN -2128 -2480 BiDir
FLAG -1216 -2496 C_out
IOPIN -1216 -2496 BiDir
FLAG -2128 -2256 C_in
IOPIN -2128 -2256 BiDir
FLAG -1648 -2496 c_fly
FLAG -1968 -2480 a
FLAG -1216 -2256 A_out
IOPIN -1216 -2256 BiDir
FLAG -1968 -2256 c
FLAG -1824 -2208 0
FLAG -2096 -2032 Vc
IOPIN -2096 -2032 In
FLAG -2272 -1792 0
FLAG -2064 -1728 0
FLAG -1552 -1968 I_mag
FLAG -1552 -1904 I_demag
SYMBOL bi -1936 -2416 R0
WINDOW 0 -99 35 Left 2
WINDOW 3 -189 62 Left 2
SYMATTR InstName Bin
SYMATTR Value I=  V(I_mag)
SYMBOL res -2000 -2496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1µ
SYMBOL bi -1824 -2336 R180
WINDOW 0 -100 17 Left 2
WINDOW 3 -26 -15 Right 2
SYMATTR InstName Bout
SYMATTR Value I=   V(I_demag)
SYMBOL voltage -1584 -2496 R270
WINDOW 0 34 103 VTop 2
WINDOW 3 29 105 VBottom 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Viso
SYMATTR Value 0
SYMBOL e -1408 -2464 M0
WINDOW 0 83 34 Left 2
WINDOW 3 41 63 Left 2
SYMATTR InstName E2
SYMATTR Value {1/N}
SYMBOL bi -1264 -2384 R180
WINDOW 0 -78 47 Left 2
WINDOW 3 -53 17 Right 2
SYMATTR InstName B1
SYMATTR Value I= I(Viso) / {N}
SYMBOL res -2000 -2272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1µ
SYMBOL PWM_CM3 -1808 -1968 R0
WINDOW 0 -129 -131 Bottom 2
WINDOW 39 446 -99 Bottom 2
SYMATTR InstName X1
SYMATTR SpiceLine L= {L}, Fs = {Fs}, Ri = {Rsense}, SlopeAmp = {SlopeAmp}, D_min ={D_min}, D_max = {D_max}, N={N}
SYMBOL bv -2272 -1936 R0
SYMATTR InstName B2
SYMATTR Value V= V(a, c)
SYMBOL bv -2064 -1872 R0
SYMATTR InstName B3
SYMATTR Value V= V(c_fly)
TEXT -880 -2536 Left 2 !.param L = 10u
TEXT -880 -2568 Left 2 !.param Fs = 200k
TEXT -880 -2440 Left 2 !.param D_min = 5
TEXT -880 -2408 Left 2 !.param D_max = 90
TEXT -880 -2472 Left 2 !.param SlopeAmp =0.2
TEXT -880 -2504 Left 2 !.param Ri = 0.25
TEXT -880 -2600 Left 2 !.param sync = 0
TEXT -960 -1880 Left 2 ;Drawn : Mark Dimattina
TEXT -968 -1968 Left 4 ;Title :  Flyback
TEXT -960 -1816 Left 2 ;Rev: 0.01
TEXT -960 -1848 Left 2 ;Date: 16/05/2024
TEXT -960 -1784 Left 2 ;M.J.Dimattina@ieee.org
TEXT -1896 -2624 Left 6 ;Flyback
TEXT -880 -2632 Left 2 !.param N = 1
TEXT -1744 -2224 Left 2 ;I=  limit( V(I_demag), 0, 1meg)
RECTANGLE Normal -576 -1680 -2496 -2720 2
